
name: Test

on: [push]

jobs:
  test_gentoo_build:
    runs-on: ubuntu-latest
    name: Build on gentoo_latest ${{ matrix.arch }}
    
    strategy:
      matrix:
        include:
          - arch: aarch64
          - arch: armv6
          - arch: armv7
          - arch: ppc64le
          - arch: s390x
    steps:
      - uses: actions/checkout@v2.1.0
      
      - uses: expeditioneer/run-on-arch-action@master
        name: Run commands
        id: runcmd
        with:
          arch: ${{ matrix.arch }}
          distro: gentoo_latest
          run: |
            echo "***********************************************************************"
            echo "/etc/portage/make.conf:" 
            cat /etc/portage/make.conf
            echo "***********************************************************************"
            echo "gcc -v"
            gcc -v
            echo "***********************************************************************"
