
name: Test

on: [push]

jobs:
  test:
    runs-on: macos-10.15
    steps:
      - run: |
          vm_stat | perl -ne '/page size of (\d+)/ and $size=$1; /Pages\s+([^:]+)[^\d]+(\d+)/ and printf("%-16s % 16.2f Mi\n", "$1:", $2 * $size / 1048576);'
          df -h
      - name: start and test FreeBSD VM
        uses: os-runners/freebsd-vm@main
        with:
          version: 12.3
          usesh: true
          run: |
            df -h
      - run: |
          vm_stat | perl -ne '/page size of (\d+)/ and $size=$1; /Pages\s+([^:]+)[^\d]+(\d+)/ and printf("%-16s % 16.2f Mi\n", "$1:", $2 * $size / 1048576);'
          df -h
